(function(e,s,l,d,c){"use strict";class g extends s{constructor(){super(...arguments),this.loading=!1,this.previewError=!1}oninit(t){super.oninit(t);const n=e.data.settings[this.attrs.setting]||"";this.urlValue=c(n)}view(){const{label:t,help:n}=this.attrs,i=this.urlValue();return m("div.Form-group",[m("label.FormLabel",t),n&&m("div.helpText",n),m("div.HeaderIconSetting",[m("div.HeaderIconSetting-input",[m("input.FormControl",{type:"url",placeholder:"https://example.com/icon.png",value:i,oninput:I=>{const o=I.target;this.urlValue(o.value),this.previewError=!1,this.saveValue(o.value)}})]),i&&m("div.HeaderIconSetting-preview",[m("div.HeaderIconSetting-previewLabel",e.translator.trans("wusong8899-client1.admin.HeaderIconPreview")),m("div.HeaderIconSetting-previewContainer",[this.loading?m(d,{size:"small"}):this.previewError?m("div.HeaderIconSetting-previewError",e.translator.trans("wusong8899-client1.admin.HeaderIconPreviewError")):m("img.HeaderIconSetting-previewImage",{src:i,alt:"Header Icon Preview",onload:()=>{this.previewError=!1,m.redraw()},onerror:()=>{this.previewError=!0,m.redraw()}})])]),m("div.HeaderIconSetting-upload",[m("div.HeaderIconSetting-uploadLabel",e.translator.trans("wusong8899-client1.admin.HeaderIconUploadLabel")),m(l,{className:"Button Button--primary",disabled:!0,onclick:()=>{e.alerts.show({type:"info",content:e.translator.trans("wusong8899-client1.admin.HeaderIconUploadComingSoon")})}},e.translator.trans("wusong8899-client1.admin.HeaderIconUploadButton")),m("div.HeaderIconSetting-uploadHelp",e.translator.trans("wusong8899-client1.admin.HeaderIconUploadHelp"))])])])}saveValue(t){clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{e.data.settings[this.attrs.setting]=t,e.request({method:"POST",url:e.forum.attribute("apiUrl")+"/settings",body:{[this.attrs.setting]:t}}).catch(()=>{})},500)}}class u{constructor(t){this.extensionId=t,this.extensionData=e.extensionData.for(t)}registerTransitionTimeSetting(){return this.extensionData.registerSetting({setting:`${this.extensionId}.TransitionTime`,type:"number",label:e.translator.trans("wusong8899-client1.admin.TransitionTime")}),this}registerHeaderIconUrlSetting(){return this.extensionData.registerSetting(()=>m(g,{setting:`${this.extensionId}.HeaderIconUrl`,label:e.translator.trans("wusong8899-client1.admin.HeaderIconUrl"),help:e.translator.trans("wusong8899-client1.admin.HeaderIconUrlHelp")})),this}registerSlideSettings(t=30){for(let n=1;n<=t;n++)this.extensionData.registerSetting({setting:`${this.extensionId}.Link${n}`,type:"URL",label:e.translator.trans(`wusong8899-client1.admin.Link${n}`)}),this.extensionData.registerSetting({setting:`${this.extensionId}.Image${n}`,type:"URL",label:e.translator.trans(`wusong8899-client1.admin.Image${n}`)});return this}registerAllSettings(t=30){return this.registerTransitionTimeSetting().registerHeaderIconUrlSetting().registerSlideSettings(t)}}const a={EXTENSION_ID:"wusong8899-client1-header-adv",MAX_SLIDES:30};function h(r=a.EXTENSION_ID,t=a.MAX_SLIDES){new u(r).registerAllSettings(t)}e.initializers.add("wusong8899/client1-header-adv",()=>{h()})})(flarum.core.compat["admin/app"],flarum.core.compat["common/Component"],flarum.core.compat["common/components/Button"],flarum.core.compat["common/components/LoadingIndicator"],flarum.core.compat["common/utils/Stream"]);
//# sourceMappingURL=admin.js.map

module.exports={};