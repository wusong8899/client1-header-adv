(function(t,S,d){"use strict";class u extends S{constructor(){super(...arguments),this.slides=[],this.loading=!1,this.nextId=1}oninit(e){super.oninit(e),this.loadExistingSlides()}loadExistingSlides(){const{extensionId:e,maxSlides:s=30}=this.attrs,i=[];for(let n=1;n<=s;n++){const a=`${e}.Link${n}`,o=`${e}.Image${n}`,r=t.data.settings[a]||"",g=t.data.settings[o]||"";(r||g)&&(i.push({id:n,link:r,image:g}),this.nextId=Math.max(this.nextId,n+1))}this.slides=i,i.length===0&&this.addSlide()}addSlide(){const e={id:this.nextId++,link:"",image:""};this.slides.push(e),m.redraw()}removeSlide(e){const{extensionId:s}=this.attrs,i=this.slides.findIndex(a=>a.id===e);if(i===-1)return;const n=this.slides[i];this.saveSetting(`${s}.Link${n.id}`,""),this.saveSetting(`${s}.Image${n.id}`,""),this.slides.splice(i,1),this.slides.length===0&&this.addSlide(),m.redraw()}updateSlide(e,s,i){const{extensionId:n}=this.attrs,a=this.slides.find(r=>r.id===e);if(!a)return;a[s]=i;const o=s==="link"?`${n}.Link${a.id}`:`${n}.Image${a.id}`;this.saveSetting(o,i)}saveSetting(e,s){const i=`saveTimeout_${e}`;clearTimeout(this[i]),this[i]=setTimeout(()=>{t.data.settings[e]=s,t.request({method:"POST",url:t.forum.attribute("apiUrl")+"/settings",body:{[e]:s}}).catch(()=>{})},500)}view(){return m("div.Form-group",[m("label.FormLabel",t.translator.trans("wusong8899-client1.admin.SlideSettings")),m("div.helpText",t.translator.trans("wusong8899-client1.admin.SlideSettingsHelp")),m("div.DynamicSlideSettings",[this.slides.map((e,s)=>this.renderSlide(e,s)),m("div.DynamicSlideSettings-addButton",[m(d,{className:"Button Button--primary",icon:"fas fa-plus",onclick:()=>this.addSlide()},t.translator.trans("wusong8899-client1.admin.AddSlide"))])])])}renderSlide(e,s){return m("div.DynamicSlideSettings-slide",{key:e.id},[m("div.DynamicSlideSettings-slideHeader",[m("h4",t.translator.trans("wusong8899-client1.admin.SlideNumber",{number:s+1})),m(d,{className:"Button Button--danger",icon:"fas fa-trash",onclick:()=>this.removeSlide(e.id),disabled:this.slides.length===1},t.translator.trans("wusong8899-client1.admin.DeleteSlide"))]),m("div.DynamicSlideSettings-slideFields",[m("div.Form-group",[m("label.FormLabel",t.translator.trans("wusong8899-client1.admin.SlideLink")),m("input.FormControl",{type:"url",placeholder:"https://example.com",value:e.link,oninput:i=>{const n=i.target;this.updateSlide(e.id,"link",n.value)}})]),m("div.Form-group",[m("label.FormLabel",t.translator.trans("wusong8899-client1.admin.SlideImage")),m("input.FormControl",{type:"url",placeholder:"https://example.com/image.jpg",value:e.image,oninput:i=>{const n=i.target;this.updateSlide(e.id,"image",n.value)}})])])])}}class h{constructor(e){this.extensionId=e,this.extensionData=t.extensionData.for(e)}registerTransitionTimeSetting(){return this.extensionData.registerSetting({setting:`${this.extensionId}.TransitionTime`,type:"number",label:t.translator.trans("wusong8899-client1.admin.TransitionTime")}),this}registerHeaderIconUrlSetting(){return this.extensionData.registerSetting({setting:`${this.extensionId}.HeaderIconUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.HeaderIconUrl"),help:t.translator.trans("wusong8899-client1.admin.HeaderIconUrlHelp")}),this}registerSocialMediaSettings(){return this.extensionData.registerSetting({setting:`${this.extensionId}.SocialKickUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialKickUrl"),help:t.translator.trans("wusong8899-client1.admin.SocialKickUrlHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialKickIcon`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialKickIcon"),help:t.translator.trans("wusong8899-client1.admin.SocialIconHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialFacebookUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialFacebookUrl"),help:t.translator.trans("wusong8899-client1.admin.SocialFacebookUrlHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialFacebookIcon`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialFacebookIcon"),help:t.translator.trans("wusong8899-client1.admin.SocialIconHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialTwitterUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialTwitterUrl"),help:t.translator.trans("wusong8899-client1.admin.SocialTwitterUrlHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialTwitterIcon`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialTwitterIcon"),help:t.translator.trans("wusong8899-client1.admin.SocialIconHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialYouTubeUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialYouTubeUrl"),help:t.translator.trans("wusong8899-client1.admin.SocialYouTubeUrlHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialYouTubeIcon`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialYouTubeIcon"),help:t.translator.trans("wusong8899-client1.admin.SocialIconHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialInstagramUrl`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialInstagramUrl"),help:t.translator.trans("wusong8899-client1.admin.SocialInstagramUrlHelp")}),this.extensionData.registerSetting({setting:`${this.extensionId}.SocialInstagramIcon`,type:"url",label:t.translator.trans("wusong8899-client1.admin.SocialInstagramIcon"),help:t.translator.trans("wusong8899-client1.admin.SocialIconHelp")}),this}registerSlideSettings(e=30){return this.extensionData.registerSetting(()=>m(u,{extensionId:this.extensionId,maxSlides:e})),this}registerAllSettings(e=30){return this.registerTransitionTimeSetting().registerHeaderIconUrlSetting().registerSocialMediaSettings().registerSlideSettings(e)}}const c={EXTENSION_ID:"wusong8899-client1-header-adv",MAX_SLIDES:30};function I(l=c.EXTENSION_ID,e=c.MAX_SLIDES){new h(l).registerAllSettings(e)}t.initializers.add("wusong8899/client1-header-adv",()=>{I()})})(flarum.core.compat["admin/app"],flarum.core.compat["common/Component"],flarum.core.compat["common/components/Button"]);
//# sourceMappingURL=admin.js.map

module.exports={};