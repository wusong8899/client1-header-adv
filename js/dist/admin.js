(function(e,S,c){"use strict";class h extends S{constructor(){super(...arguments),this.slides=[],this.loading=!1,this.nextId=1}oninit(t){super.oninit(t),this.loadExistingSlides()}loadExistingSlides(){const{extensionId:t,maxSlides:i=30}=this.attrs,n=[];for(let s=1;s<=i;s++){const r=`${t}.Link${s}`,d=`${t}.Image${s}`,a=e.data.settings[r]||"",u=e.data.settings[d]||"";(a||u)&&(n.push({id:s,link:a,image:u}),this.nextId=Math.max(this.nextId,s+1))}this.slides=n,n.length===0&&this.addSlide()}addSlide(){const t={id:this.nextId++,link:"",image:""};this.slides.push(t),m.redraw()}removeSlide(t){const{extensionId:i}=this.attrs,n=this.slides.findIndex(r=>r.id===t);if(n===-1)return;const s=this.slides[n];this.saveSetting(`${i}.Link${s.id}`,""),this.saveSetting(`${i}.Image${s.id}`,""),this.slides.splice(n,1),this.slides.length===0&&this.addSlide(),m.redraw()}updateSlide(t,i,n){const{extensionId:s}=this.attrs,r=this.slides.find(a=>a.id===t);if(!r)return;r[i]=n;const d=i==="link"?`${s}.Link${r.id}`:`${s}.Image${r.id}`;this.saveSetting(d,n)}saveSetting(t,i){const n=`saveTimeout_${t}`;clearTimeout(this[n]),this[n]=setTimeout(()=>{e.data.settings[t]=i,e.request({method:"POST",url:e.forum.attribute("apiUrl")+"/settings",body:{[t]:i}}).catch(()=>{})},500)}view(){return m("div.Form-group",[m("label.FormLabel",e.translator.trans("wusong8899-client1.admin.SlideSettings")),m("div.helpText",e.translator.trans("wusong8899-client1.admin.SlideSettingsHelp")),m("div.DynamicSlideSettings",[this.slides.map((t,i)=>this.renderSlide(t,i)),m("div.DynamicSlideSettings-addButton",[m(c,{className:"Button Button--primary",icon:"fas fa-plus",onclick:()=>this.addSlide()},e.translator.trans("wusong8899-client1.admin.AddSlide"))])])])}renderSlide(t,i){return m("div.DynamicSlideSettings-slide",{key:t.id},[m("div.DynamicSlideSettings-slideHeader",[m("h4",e.translator.trans("wusong8899-client1.admin.SlideNumber",{number:i+1})),m(c,{className:"Button Button--danger",icon:"fas fa-trash",onclick:()=>this.removeSlide(t.id),disabled:this.slides.length===1},e.translator.trans("wusong8899-client1.admin.DeleteSlide"))]),m("div.DynamicSlideSettings-slideFields",[m("div.Form-group",[m("label.FormLabel",e.translator.trans("wusong8899-client1.admin.SlideLink")),m("input.FormControl",{type:"url",placeholder:"https://example.com",value:t.link,oninput:n=>{const s=n.target;this.updateSlide(t.id,"link",s.value)}})]),m("div.Form-group",[m("label.FormLabel",e.translator.trans("wusong8899-client1.admin.SlideImage")),m("input.FormControl",{type:"url",placeholder:"https://example.com/image.jpg",value:t.image,oninput:n=>{const s=n.target;this.updateSlide(t.id,"image",s.value)}})])])])}}const l={slider:{maxSlides:30}};class I{constructor(t){this.extensionId=t,this.extensionData=e.extensionData.for(t)}registerTransitionTimeSetting(){return this.extensionData.registerSetting({setting:`${this.extensionId}.TransitionTime`,type:"number",label:e.translator.trans("wusong8899-client1.admin.TransitionTime")}),this}registerHeaderIconUrlSetting(){return this.extensionData.registerSetting({setting:`${this.extensionId}.HeaderIconUrl`,type:"url",label:e.translator.trans("wusong8899-client1.admin.HeaderIconUrl"),help:e.translator.trans("wusong8899-client1.admin.HeaderIconUrlHelp")}),this}registerSocialMediaSettings(){return[{name:"Kick",urlKey:"SocialKickUrl",iconKey:"SocialKickIcon"},{name:"Facebook",urlKey:"SocialFacebookUrl",iconKey:"SocialFacebookIcon"},{name:"Twitter",urlKey:"SocialTwitterUrl",iconKey:"SocialTwitterIcon"},{name:"YouTube",urlKey:"SocialYouTubeUrl",iconKey:"SocialYouTubeIcon"},{name:"Instagram",urlKey:"SocialInstagramUrl",iconKey:"SocialInstagramIcon"}].forEach(i=>{this.extensionData.registerSetting({setting:`${this.extensionId}.${i.urlKey}`,type:"url",label:e.translator.trans(`wusong8899-client1.admin.${i.urlKey}`),help:e.translator.trans(`wusong8899-client1.admin.${i.urlKey}Help`)}),this.extensionData.registerSetting({setting:`${this.extensionId}.${i.iconKey}`,type:"url",label:e.translator.trans(`wusong8899-client1.admin.${i.iconKey}`),help:e.translator.trans("wusong8899-client1.admin.SocialIconHelp")})}),this}registerSlideSettings(t=l.slider.maxSlides){return this.extensionData.registerSetting(()=>m(h,{extensionId:this.extensionId,maxSlides:t})),this}registerAllSettings(t=l.slider.maxSlides){return this.registerTransitionTimeSetting().registerHeaderIconUrlSetting().registerSocialMediaSettings().registerSlideSettings(t)}}const g={EXTENSION_ID:"wusong8899-client1-header-adv",MAX_SLIDES:l.slider.maxSlides};function x(o=g.EXTENSION_ID,t=g.MAX_SLIDES){new I(o).registerAllSettings(t)}e.initializers.add("wusong8899/client1-header-adv",()=>{x()})})(flarum.core.compat["admin/app"],flarum.core.compat["common/Component"],flarum.core.compat["common/components/Button"]);

module.exports={};